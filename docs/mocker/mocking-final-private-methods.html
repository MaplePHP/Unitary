<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-mocker/mocking-final-private-methods" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Mocking Final &amp; Private Methods | PHP Unitary</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://maplephp.github.io/Unitary/img/validate-social-card.png"><meta data-rh="true" name="twitter:image" content="https://maplephp.github.io/Unitary/img/validate-social-card.png"><meta data-rh="true" property="og:url" content="https://maplephp.github.io/Unitary/docs/mocker/mocking-final-private-methods"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="theme-color" content="#ffffff"><meta data-rh="true" name="msapplication-TileColor" content="#ffffff"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mocking Final &amp; Private Methods | PHP Unitary"><meta data-rh="true" name="description" content="Mocking Final &amp; Private Methods"><meta data-rh="true" property="og:description" content="Mocking Final &amp; Private Methods"><link data-rh="true" rel="icon" href="/Unitary/favicon.ico"><link data-rh="true" rel="canonical" href="https://maplephp.github.io/Unitary/docs/mocker/mocking-final-private-methods"><link data-rh="true" rel="alternate" href="https://maplephp.github.io/Unitary/docs/mocker/mocking-final-private-methods" hreflang="en"><link data-rh="true" rel="alternate" href="https://maplephp.github.io/Unitary/docs/mocker/mocking-final-private-methods" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3SHRGH4EEU-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/Unitary/blog/rss.xml" title="PHP Unitary RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Unitary/blog/atom.xml" title="PHP Unitary Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3092KZDQF"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-M3092KZDQF",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="PHP Unitary" href="/Unitary/opensearch.xml">
<meta name="algolia-site-verification" content="E26F10C563888C99">
<link rel="apple-touch-icon" sizes="180x180" href="/Unitary/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="96x96" href="/Unitary/favicon-96x96.png">
<link rel="manifest" href="/Unitary/site.webmanifest"><link rel="stylesheet" href="/Unitary/assets/css/styles.cf83a844.css">
<script src="/Unitary/assets/js/runtime~main.35f1cf84.js" defer="defer"></script>
<script src="/Unitary/assets/js/main.8c5166f5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Unitary/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Unitary/"><div class="navbar__logo"><img src="/Unitary/img/logo.svg" alt="Unitary" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Unitary/img/logo.svg" alt="Unitary" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">PHP Unitary</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Unitary/docs/get-started">The Documentation</a><a class="navbar__item navbar__link" href="/Unitary/validation-api">Validation API</a><a class="navbar__item navbar__link" href="/Unitary/why-unitary">Why Unitary?</a><a class="navbar__item navbar__link" href="/Unitary/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://github.com/MaplePHP/Unitary" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/get-started">Get Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/write-tests">Write Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/run-tests">Run tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/partial-overrides">Partial Overrides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Unitary/docs/mocker/introduction-to-mocker">Mocking &amp; Stubbing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Unitary/docs/mocker/introduction-to-mocker">Introduction to Mocker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Unitary/docs/mocker/creating-mocks">Creating mocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Unitary/docs/mocker/method-expectations">Method Expectations &amp; Behaviors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Unitary/docs/mocker/mocking-final-private-methods">Mocking Final &amp; Private Methods</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/ide-integration">IDE Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/code-coverage">Code Coverage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Unitary/docs/audit">Audits</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Unitary/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Mocking &amp; Stubbing</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Mocking Final &amp; Private Methods</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mocking Final &amp; Private Methods</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-final--private-methods">Mocking Final &amp; Private Methods<a href="#mocking-final--private-methods" class="hash-link" aria-label="Direct link to Mocking Final &amp; Private Methods" title="Direct link to Mocking Final &amp; Private Methods">​</a></h2>
<blockquote>
<p><strong>Unitary doesn’t support mocking final or private methods — by design.</strong></p>
</blockquote>
<p>This isn’t a technical limitation, it’s an intentional choice. Mocking in Unitary is meant to reflect how your system is structured, not bypass it.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="focus-on-testable-design">Focus on Testable Design<a href="#focus-on-testable-design" class="hash-link" aria-label="Direct link to Focus on Testable Design" title="Direct link to Focus on Testable Design">​</a></h2>
<p>Unitary encourages testing <em>behavior</em>, not internal implementation details. That means relying on public methods and substitutable dependencies.</p>
<p>If you find yourself needing to mock a private or final method, it&#x27;s often a sign the design could be improved.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-interfaces-instead-of-final-classes-or-methods">Use Interfaces Instead of Final Classes or Methods<a href="#use-interfaces-instead-of-final-classes-or-methods" class="hash-link" aria-label="Direct link to Use Interfaces Instead of Final Classes or Methods" title="Direct link to Use Interfaces Instead of Final Classes or Methods">​</a></h2>
<p>Final classes and methods can’t be mocked in PHP, not in Unitary or any other framework. But if you rely on an interface instead of the concrete class, mocking becomes straightforward.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-interfaces-help">Why Interfaces Help<a href="#why-interfaces-help" class="hash-link" aria-label="Direct link to Why Interfaces Help" title="Direct link to Why Interfaces Help">​</a></h3>
<p>Interfaces describe behavior without tying you to an implementation. If your class depends on an interface, you can easily replace it in tests, no matter how the real class is built.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h3>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8fafc;--prism-background-color:#011627"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8fafc;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8fafc"><span class="token keyword" style="color:#569CD6">interface</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#0ea5e9">MailerInterface</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token keyword" style="color:#569CD6">public</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#7dd3fc">send</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$to</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$subject</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$body</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#569CD6">bool</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain"></span><span class="token punctuation" style="color:#D4D4D4">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="even-if-the-real-mailer-is-final">Even if the real mailer is final:<a href="#even-if-the-real-mailer-is-final" class="hash-link" aria-label="Direct link to Even if the real mailer is final:" title="Direct link to Even if the real mailer is final:">​</a></h4>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8fafc;--prism-background-color:#011627"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8fafc;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8fafc"><span class="token keyword" style="color:#569CD6">final</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#0ea5e9">Mailer</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">MailerInterface</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token keyword" style="color:#569CD6">public</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#7dd3fc">send</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$to</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$subject</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$body</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#569CD6">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// Implementation details</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token punctuation" style="color:#D4D4D4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain"></span><span class="token punctuation" style="color:#D4D4D4">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="your-application-can-remain-flexible">Your application can remain flexible:<a href="#your-application-can-remain-flexible" class="hash-link" aria-label="Direct link to Your application can remain flexible:" title="Direct link to Your application can remain flexible:">​</a></h4>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8fafc;--prism-background-color:#011627"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8fafc;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8fafc"><span class="token keyword" style="color:#569CD6">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#0ea5e9">NotificationService</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token keyword" style="color:#569CD6">public</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#7dd3fc">__construct</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token keyword" style="color:#569CD6">private</span><span class="token plain"> </span><span class="token class-name type-declaration" style="color:#0ea5e9">MailerInterface</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$mailer</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token punctuation" style="color:#D4D4D4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token keyword" style="color:#569CD6">public</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#7dd3fc">sendWelcome</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token keyword type-hint" style="color:#569CD6">string</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$email</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#569CD6">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">        </span><span class="token keyword" style="color:#569CD6">return</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$this</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token property">mailer</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">send</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token variable" style="color:#9CDCFE">$email</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#cbd5e1">&#x27;Welcome&#x27;</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#cbd5e1">&#x27;Thanks for signing up.&#x27;</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token punctuation" style="color:#D4D4D4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain"></span><span class="token punctuation" style="color:#D4D4D4">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="then-in-you-test-just-mock-the-interface">Then in you test, just mock the interface:<a href="#then-in-you-test-just-mock-the-interface" class="hash-link" aria-label="Direct link to Then in you test, just mock the interface:" title="Direct link to Then in you test, just mock the interface:">​</a></h4>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8fafc;--prism-background-color:#011627"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8fafc;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8fafc"><span class="token function" style="color:#7dd3fc">group</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token string single-quoted-string" style="color:#cbd5e1">&#x27;Sends welcome email&#x27;</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token variable" style="color:#9CDCFE">$test</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token variable" style="color:#9CDCFE">$mailer</span><span class="token plain"> </span><span class="token operator" style="color:#D4D4D4">=</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$test</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">mock</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token class-name static-context" style="color:#0ea5e9">MailerInterface</span><span class="token operator" style="color:#D4D4D4">::</span><span class="token keyword" style="color:#569CD6">class</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token variable" style="color:#9CDCFE">$mock</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#D4D4D4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">        </span><span class="token variable" style="color:#9CDCFE">$mock</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">method</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token string single-quoted-string" style="color:#cbd5e1">&#x27;send&#x27;</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">willReturn</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token constant boolean" style="color:#f8fafc">true</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">called</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token punctuation" style="color:#D4D4D4">}</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token variable" style="color:#9CDCFE">$service</span><span class="token plain"> </span><span class="token operator" style="color:#D4D4D4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">NotificationService</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token variable" style="color:#9CDCFE">$mailer</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token variable" style="color:#9CDCFE">$result</span><span class="token plain"> </span><span class="token operator" style="color:#D4D4D4">=</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$service</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">sendWelcome</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token string single-quoted-string" style="color:#cbd5e1">&#x27;john@example.com&#x27;</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain">    </span><span class="token variable" style="color:#9CDCFE">$test</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">validate</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token variable" style="color:#9CDCFE">$result</span><span class="token punctuation" style="color:#D4D4D4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#569CD6">fn</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token variable" style="color:#9CDCFE">$v</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token plain"> </span><span class="token operator" style="color:#D4D4D4">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#9CDCFE">$v</span><span class="token operator" style="color:#D4D4D4">-&gt;</span><span class="token function" style="color:#7dd3fc">isTrue</span><span class="token punctuation" style="color:#D4D4D4">(</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8fafc"><span class="token plain"></span><span class="token punctuation" style="color:#D4D4D4">}</span><span class="token punctuation" style="color:#D4D4D4">)</span><span class="token punctuation" style="color:#D4D4D4">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You’re testing behavior, not implementation. That’s the goal.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-you-shouldnt-mock-private-methods">Why You Shouldn&#x27;t Mock Private Methods<a href="#why-you-shouldnt-mock-private-methods" class="hash-link" aria-label="Direct link to Why You Shouldn&#x27;t Mock Private Methods" title="Direct link to Why You Shouldn&#x27;t Mock Private Methods">​</a></h2>
<p>Private methods are internal details. They aren&#x27;t meant to be called directly, and they aren’t meant to be mocked.</p>
<p>If a private method contains logic important enough to test, consider:</p>
<ul>
<li>Moving it to its own class</li>
<li>Making it public or protected in a dedicated helper</li>
<li>Rethinking its role in the design</li>
</ul>
<p>The aim is to keep logic visible and testable.</p>
<hr>
<p><strong>If mocking feels difficult, the code may need a small design adjustment.</strong>
Unitary supports clear, testable architecture, use interfaces, inject dependencies, and focus on behavior.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Unitary/docs/mocker/method-expectations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Method Expectations &amp; Behaviors</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Unitary/docs/configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mocking-final--private-methods" class="table-of-contents__link toc-highlight">Mocking Final &amp; Private Methods</a></li><li><a href="#focus-on-testable-design" class="table-of-contents__link toc-highlight">Focus on Testable Design</a></li><li><a href="#use-interfaces-instead-of-final-classes-or-methods" class="table-of-contents__link toc-highlight">Use Interfaces Instead of Final Classes or Methods</a><ul><li><a href="#why-interfaces-help" class="table-of-contents__link toc-highlight">Why Interfaces Help</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#why-you-shouldnt-mock-private-methods" class="table-of-contents__link toc-highlight">Why You Shouldn&#39;t Mock Private Methods</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Unitary/docs/get-started">Get started</a></li><li class="footer__item"><a class="footer__link-item" href="/Unitary/docs/run-tests">Write Tests</a></li><li class="footer__item"><a class="footer__link-item" href="/Unitary/docs/run-tests">Run Tests</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MaplePHP/Unitary" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://se.linkedin.com/in/daniel-ronkainen-161b3386/en" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MaplePHP/unitary" target="_blank" rel="noopener noreferrer" class="footer__link-item">Unitary<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/maplephp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emitron<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/http" target="_blank" rel="noopener noreferrer" class="footer__link-item">HTTP message<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/Prompts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Prompts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/Blunder" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blunder<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MaplePHP/validate" target="_blank" rel="noopener noreferrer" class="footer__link-item">Validate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/dto" target="_blank" rel="noopener noreferrer" class="footer__link-item">Darn Tidy object<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/container" target="_blank" rel="noopener noreferrer" class="footer__link-item">Container<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MaplePHP/cache" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cache<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Darn Tidy Object (Unitary), Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>